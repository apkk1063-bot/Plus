<!DOCTYPE html>
<html lang="my">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thai Bank Slip Generator</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        body { font-family: sans-serif; background-color: #f0f2f5; margin: 0; padding: 20px; display: flex; flex-direction: column; align-items: center; }

        /* --- (၁) ဘဏ်ရွေးချယ်သည့် နေရာ --- */
        #bank-selection { width: 100%; max-width: 360px; text-align: center; }
        .bank-card {
            background: white; padding: 15px; margin: 10px 0; border-radius: 10px;
            display: flex; align-items: center; cursor: pointer; transition: 0.2s; box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .bank-card:hover { transform: scale(1.02); }
        .bank-logo-sm { width: 40px; height: 40px; margin-right: 15px; border-radius: 5px; }
        .bank-name { font-weight: bold; font-size: 16px; color: #333; }

        /* --- (၂) စလစ်နှင့် Input နေရာ (ပထမတော့ ဖုံးထားမည်) --- */
        #main-generator { display: none; flex-direction: column; align-items: center; width: 100%; max-width: 360px; }

        /* စလစ်ဒီဇိုင်း */
        #capture-area {
            width: 340px; background: white; border-radius: 10px; padding: 18px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1); margin-bottom: 20px; box-sizing: border-box;
        }
        .header { display: flex; align-items: center; margin-bottom: 15px; }
        .bank-text { border-left: 2px solid #ddd; padding-left: 10px; flex-grow: 1; margin-left: 10px; }
        .th { font-size: 14px; font-weight: bold; color: #333; display: block; }
        .en { font-size: 11px; color: #666; font-weight: bold; }
        .main-logo { width: 40px; height: 40px; }

        .name-row {
            color: white; padding: 12px; font-weight: bold; font-size: 18px;
            text-transform: uppercase; border-radius: 4px; margin-top: 10px;
        }
        .acc-number { font-size: 26px; font-weight: bold; color: #222; margin-top: 15px; font-family: monospace; }

        /* Input နေရာ */
        .controls { background: white; padding: 15px; border-radius: 10px; width: 100%; box-sizing: border-box; }
        input { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ddd; border-radius: 6px; font-size: 16px; box-sizing: border-box; }
        .save-btn { width: 100%; padding: 14px; color: white; border: none; border-radius: 6px; font-weight: bold; cursor: pointer; }
        .back-btn { margin-top: 15px; background: none; border: none; color: #666; cursor: pointer; text-decoration: underline; }
    </style>
</head>
<body>

    <div id="bank-selection">
        <h3>ထိုင်းဘဏ်ကို ရွေးချယ်ပါ</h3>
        <div class="bank-card" onclick="selectBank('kbank')">
            <img class="bank-logo-sm" src="https://upload.wikimedia.org/wikipedia/en/thumb/f/f0/Kasikornbank_Logo.svg/1200px-Kasikornbank_Logo.svg.png">
            <span class="bank-name">Kasikorn Bank (K-Bank)</span>
        </div>
        <div class="bank-card" onclick="selectBank('scb')">
            <img class="bank-logo-sm" src="https://www.scb.co.th/content/dam/scb/about-us/news/scb-announces-new-logo/scb-logo.png">
            <span class="bank-name">Siam Commercial Bank (SCB)</span>
        </div>
        <div class="bank-card" onclick="selectBank('bbl')">
            <img class="bank-logo-sm" src="https://www.bangkokbank.com/-/media/library/images/global/logo/bbl_logo.png">
            <span class="bank-name">Bangkok Bank</span>
        </div>
        <div class="bank-card" onclick="selectBank('ktb')">
            <img class="bank-logo-sm" src="https://krungthai.com/Resource/Common/Graphic/logo-krungthai-bank.png">
            <span class="bank-name">Krungthai Bank</span>
        </div>
        <div class="bank-card" onclick="selectBank('bay')">
            <img class="bank-logo-sm" src="https://www.krungsri.com/Krungsri2018/media/Contents/About-Krungsri/krungsri-logo.png">
            <span class="bank-name">Krungsri Bank</span>
        </div>
    </div>

    <div id="main-generator">
        <div id="capture-area">
            <div class="header">
                <img id="slip-logo" class="main-logo" src="">
                <div class="bank-text">
                    <span id="slip-bank-th" class="th"></span>
                    <span id="slip-bank-en" class="en"></span>
                </div>
            </div>
            <div id="name-bar" class="name-row">MR. <span id="out-name">NAME HERE</span></div>
            <div class="acc-number" id="out-bank">000-000-0000</div>
        </div>

        <div class="controls">
            <input type="text" id="in-name" oninput="sync()" placeholder="နာမည် (NAME)" style="text-transform: uppercase;">
            <input type="text" id="in-bank" inputmode="numeric" maxlength="10" oninput="sync()" placeholder="ဘဏ်နံပါတ် (0000000000)">
            <button id="save-btn" class="save-btn" onclick="save()">SAVE IMAGE</button>
            <center><button class="back-btn" onclick="goBack()">ဘဏ်ပြန်ရွေးမည်</button></center>
        </div>
    </div>

    <script>
        const banks = {
            kbank: { color: '#00A950', th: 'ธนาคารกสิกรไทย', en: 'KASIKORNBANK', logo: 'https://upload.wikimedia.org/wikipedia/en/thumb/f/f0/Kasikornbank_Logo.svg/1200px-Kasikornbank_Logo.svg.png' },
            scb: { color: '#4e2e7f', th: 'ธนาคารไทยพาณิชย์', en: 'SIAM COMMERCIAL BANK', logo: 'https://www.scb.co.th/content/dam/scb/about-us/news/scb-announces-new-logo/scb-logo.png' },
            bbl: { color: '#1e4598', th: 'ธนาคารกรุงเทพ', en: 'BANGKOK BANK', logo: 'https://www.bangkokbank.com/-/media/library/images/global/logo/bbl_logo.png' },
            ktb: { color: '#00a1e0', th: 'ธนาคารกรุงไทย', en: 'KRUNGTHAI BANK', logo: 'https://krungthai.com/Resource/Common/Graphic/logo-krungthai-bank.png' },
            bay: { color: '#fec43b', th: 'ธนาคารกรุงศรีอยุธยา', en: 'KRUNGSRI BANK', logo: 'https://www.krungsri.com/Krungsri2018/media/Contents/About-Krungsri/krungsri-logo.png' }
        };

        let activeColor = '';

        function selectBank(key) {
            const bank = banks[key];
            activeColor = bank.color;
            document.getElementById('slip-logo').src = bank.logo;
            document.getElementById('slip-bank-th').innerText = bank.th;
            document.getElementById('slip-bank-en').innerText = bank.en;
            document.getElementById('name-bar').style.backgroundColor = bank.color;
            document.getElementById('save-btn').style.backgroundColor = bank.color;
            
            document.getElementById('bank-selection').style.display = 'none';
            document.getElementById('main-generator').style.display = 'flex';
        }

        function goBack() {
            document.getElementById('bank-selection').style.display = 'block';
            document.getElementById('main-generator').style.display = 'none';
        }

        function sync() {
            let n = document.getElementById('in-name').value.toUpperCase();
            document.getElementById('in-name').value = n;
            document.getElementById('out-name').innerText = n || "NAME HERE";

            let b = document.getElementById('in-bank');
            let v = b.value.replace(/\D/g, ''); 
            b.value = v;

            let fmt = "000-000-0000";
            if (v.length > 0) {
                fmt = v.substring(0, 3).padEnd(3, '0') + "-" + v.substring(3, 6).padEnd(3, '0') + "-" + v.substring(6, 10).padEnd(4, '0');
            }
            document.getElementById('out-bank').innerText = fmt;
        }

        function save() {
            html2canvas(document.getElementById('capture-area'), { scale: 3, useCORS: true }).then(canvas => {
                let l = document.createElement('a');
                l.download = 'bank-slip.png';
                l.href = canvas.toDataURL();
                l.click();
            });
        }
    </script>
</body>
</html>
